(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{41288:function(e,l,t){Promise.resolve().then(t.bind(t,76774))},76774:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return R}});var n=t(57437),r=t(2265),a=t(66648),o=t(16463),s=t(96293),c=t(24012),d=t(73654),i=t(12194),u=t(1959),p=t(11736),m=t(59095),x=t(74138),h=t(86608),f=t(57029),b=t(80021),j=t(47497),g=t(22840),w=t(60327),y=t(48790),k=t(55211),v=t(37346);function R(){let[e,l]=(0,r.useState)([]),[t,k]=(0,r.useState)(""),[R,C]=(0,r.useState)([]),[G,P]=(0,r.useState)([]),[S,A]=(0,r.useState)([]),[N,W]=(0,r.useState)(null),[T,B]=(0,r.useState)(0),[I,M]=(0,r.useState)(null),[E,q]=(0,r.useState)(0),F=(0,r.useRef)(new Date);function O(e){let l=Math.floor(e/60),t=l<12||24===l?"AM":"PM";return l>12&&(l-=12),"".concat(l.toFixed(0).padStart(2,"0"),":").concat((e%60).toFixed(0).padStart(2,"0")," ").concat(t)}let z=(0,r.useCallback)((l,t,n)=>{l||(l=e);let r=60*F.current.getHours()+F.current.getMinutes(),a=-1;for(let e=0;e<l.length;e++){let t=l[e];if(r>=t.start&&r<=t.end||e<l.length-1&&r>t.end&&r<l[e+1].start){a=e;break}}let o=a>=0?l[a]:null;W(o);let s=o?o.end-r:0;M(a<l.length-1?l[a+1]:null),q((r-510)/420*360-90),o&&F.current.getMinutes()!=t.getMinutes()&&n&&3===s&&o.shouldWarn&&(null==n||n.play(),w.notifications.show({title:"3 minutes left of ".concat(o.name,"!"),message:"",style:{backgroundColor:"#f76707"},color:"white",autoClose:5e3})),B(s)},[F,e,930,510]);(0,r.useEffect)(()=>{function t(e){let t=[];if(e.length>0){let n=e.split("|"),r=[],a=[],o=[];n.forEach(e=>{let l=e.split(";"),n={name:l[0],color:"#".concat(l[1]),start:Number(l[2]),end:Number(l[3]),shouldWarn:"true"===l[4]};t.push(n),r.push(n.name),a.push(n.color),o.push((n.end-n.start)/420)}),t.length>0&&(l(t),C(r),P(a),A(o))}return t}if(e.length>0)return;let n=t(window.location.search.replace("?courses=","").replaceAll("%3B",";").replaceAll("%7C","|").replaceAll("+"," ").replaceAll("=","")),r=new Audio("./warning.wav");F.current=new Date,z(n.length>0?n:e,F.current),setInterval(()=>{let e=F.current;F.current=new Date,z(t(window.location.search.replace("?courses=","").replaceAll("%3B",";").replaceAll("%7C","|").replaceAll("+"," ").replaceAll("=","")),e,r)},5e3)},[e,R,G,S,z,420]);let D=["#1c7ed6","#228be6","#339af0","#4dabf7","#74c0fc","#37b24d","#40c057","#51cf66","#69db7c","#8ce99a","#f59f00","#fab005","#fcc419","#ffd43b","#ffe066","#f76707","#fd7e14","#ff922b","#ffa94d","#ffc078","#f03e3e","#fa5252","#ff6b6b","#ff8787","#ffa8a8","#7048e8","#7950f2","#845ef7","#9775fa","#b197fc","#8d6e63","#a68274","#bf9586","#d9a998","#f2bdaa"],_=["Blue 1","Blue 2","Blue 3","Blue 4","Blue 5","Green 1","Green 2","Green 3","Green 4","Green 5","Yellow 1","Yellow 2","Yellow 3","Yellow 4","Yellow 5","Orange 1","Orange 2","Orange 3","Orange 4","Orange 5","Red 1","Red 2","Red 3","Red 4","Red 5","Purple 1","Purple 2","Purple 3","Purple 4","Purple 5","Brown 1","Brown 2","Brown 3","Brown 4","Brown 5"],V=(0,j.c)({mode:"uncontrolled",initialValues:{name:"",color:D[0],start:"08:30",end:"10:00",shouldWarn:!0},validate:{name:e=>0===e.length?"Required":null,color:e=>0===e.length?"Required":null,start:e=>0===e.length?"Required":null,end:e=>0===e.length?"Required":null},transformValues:e=>{let l=e.start.split(":"),t=e.end.split(":");return{name:e.name,color:e.color,start:60*Number(l[0])+Number(l[1]),end:60*Number(t[0])+Number(t[1]),shouldWarn:e.shouldWarn}}}),Y=(0,j.c)({mode:"uncontrolled",initialValues:{name:"",color:D[0],start:"08:30",end:"10:00",shouldWarn:!0},validate:{name:e=>0===e.length?"Required":null,color:e=>0===e.length?"Required":null,start:e=>0===e.length?"Required":null,end:e=>0===e.length?"Required":null},transformValues:e=>{let l=e.start.split(":"),t=e.end.split(":");return{name:e.name,color:e.color,start:60*Number(l[0])+Number(l[1]),end:60*Number(t[0])+Number(t[1]),shouldWarn:e.shouldWarn}}}),L=(0,o.useRouter)(),U=(0,o.usePathname)();function H(e){let l="".concat(U,"?courses=");e.forEach((e,t)=>{t>0&&(l+="|"),l+="".concat(e.name,";").concat(e.color.slice(1),";").concat(e.start,";").concat(e.end,";").concat(e.shouldWarn)}),L.push(l)}let J=r=>y.modals.openConfirmModal({title:(0,n.jsx)(s.Text,{fw:700,children:"Are you sure?"}),children:(0,n.jsxs)(s.Text,{children:["Are you sure you want to delete ",t,"?"]}),labels:{confirm:"Delete",cancel:"Cancel"},confirmProps:{color:"red"},onConfirm:()=>(function(t){let n=e.filter((e,l)=>l!==t);l(n),H(n),z(n,F.current)})(r)});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.Card,{m:"md",p:"md",radius:"md",children:(0,n.jsxs)(d.Grid,{align:"center",justify:"center",children:[(0,n.jsxs)(d.Grid.Col,{span:{base:6,md:4},pos:"relative",display:N?"block":"none",children:[(0,n.jsx)(v.by,{data:{labels:R,datasets:[{label:"Class Length",data:S,backgroundColor:G,borderColor:"#2e2e2e",borderWidth:4}]},options:{plugins:{legend:{display:!1},tooltip:{enabled:!1}}}}),(0,n.jsx)(i.Paper,{bg:"white",radius:"xl",style:{position:"absolute",left:"50%",top:"50%",width:"50%",height:"8px",transformOrigin:"4px 4px",translate:"-4px -4px",rotate:"".concat(E,"deg"),border:"2px solid #2e2e2e"},children:(0,n.jsx)(a.default,{src:"./arrow.png",alt:"clock arrow",width:"16",height:"16",style:{position:"relative",left:"calc(100% - 8px)",top:"-8px"}})})]}),(0,n.jsxs)(d.Grid.Col,{span:{base:6,md:4},display:N?"block":"none",children:[(0,n.jsx)(s.Text,{fw:700,size:"xl",c:null==N?void 0:N.color,display:T>0?"block":"none",children:null==N?void 0:N.name}),(0,n.jsxs)(s.Text,{display:T>0?"block":"none",children:[O(null==N?void 0:N.start)," - ",O(null==N?void 0:N.end)]}),(0,n.jsx)(s.Text,{fw:900,size:"xl",c:"white",tt:"uppercase",mt:"md",children:T>0?T:"Passing period"}),(0,n.jsx)(s.Text,{fw:900,size:"xl",c:"white",tt:"uppercase",display:T>0?"block":"none",children:"minutes left"}),(0,n.jsx)(s.Text,{size:"sm",tt:"uppercase",fw:700,mt:"md",display:I?"block":"none",children:"Next"}),(0,n.jsx)(s.Text,{fw:700,size:"lg",c:null==I?void 0:I.color,display:I?"block":"none",children:null==I?void 0:I.name}),(0,n.jsxs)(s.Text,{display:I?"block":"none",children:["at ",O(null==I?void 0:I.start)]})]}),(0,n.jsx)(d.Grid.Col,{span:{base:12},display:N?"none":"block",children:(0,n.jsx)(s.Text,{fw:700,size:"xl",c:"white",style:{textAlign:"center"},tt:"uppercase",children:"No class in session"})})]})}),(0,n.jsxs)(u.Container,{visibleFrom:"md",children:[(0,n.jsx)(c.Card,{mb:"md",p:"md",radius:"md",children:(0,n.jsxs)("form",{onSubmit:V.onSubmit(function(t){C([...R,t.name]),P([...G,t.color]),A([...S,(t.end-t.start)/420]);let n=[...e,t];l(n),H(n),z(n,F.current)}),children:[(0,n.jsx)(p.TextInput,{label:"Name",placeholder:"Example Class",...V.getInputProps("name")},V.key("name")),(0,n.jsx)(m.Checkbox,{mt:"md",label:"Use 3 minute warning",...V.getInputProps("shouldWarn",{type:"checkbox"})},V.key("shouldWarn")),(0,n.jsxs)(x.Radio.Group,{mt:"md",label:"Color",...V.getInputProps("color"),children:[(0,n.jsx)(h.Group,{mt:"xs",children:D.slice(0,5).map((e,l)=>(0,n.jsx)(x.Radio,{value:e,label:_[l],color:e},"add-".concat(e)))}),(0,n.jsx)(h.Group,{mt:"xs",children:D.slice(5,10).map((e,l)=>(0,n.jsx)(x.Radio,{value:e,label:_[l+5],color:e},"add-".concat(e)))}),(0,n.jsx)(h.Group,{mt:"xs",children:D.slice(10,15).map((e,l)=>(0,n.jsx)(x.Radio,{value:e,label:_[l+10],color:e},"add-".concat(e)))}),(0,n.jsx)(h.Group,{mt:"xs",children:D.slice(15,20).map((e,l)=>(0,n.jsx)(x.Radio,{value:e,label:_[l+15],color:e},"add-".concat(e)))}),(0,n.jsx)(h.Group,{mt:"xs",children:D.slice(20,25).map((e,l)=>(0,n.jsx)(x.Radio,{value:e,label:_[l+20],color:e},"add-".concat(e)))}),(0,n.jsx)(h.Group,{mt:"xs",children:D.slice(25,30).map((e,l)=>(0,n.jsx)(x.Radio,{value:e,label:_[l+25],color:e},"add-".concat(e)))}),(0,n.jsx)(h.Group,{mt:"xs",children:D.slice(30,35).map((e,l)=>(0,n.jsx)(x.Radio,{value:e,label:_[l+30],color:e},"add-".concat(e)))})]},V.key("color")),(0,n.jsx)(g.M,{mt:"md",label:"Start Time",...V.getInputProps("start")},V.key("start")),(0,n.jsx)(g.M,{mt:"md",label:"End Time",...V.getInputProps("end")},V.key("end")),(0,n.jsx)(h.Group,{justify:"flex-end",mt:"md",children:(0,n.jsx)(f.Button,{type:"submit",children:"Add"})})]})}),(0,n.jsx)(b.Accordion,{variant:"separated",mb:"md",value:t,onChange:l=>{k(l),function(l){if(!l||0===l.length)return;let t=e.find(e=>e.name===l);if(!t)return;let n=Math.floor(t.start/60),r=t.start%60,a=Math.floor(t.end/60),o=t.end%60;Y.setValues({name:t.name,color:t.color,start:"".concat(n.toFixed(0).padStart(2,"0"),":").concat(r.toFixed(0).padStart(2,"0")),end:"".concat(a.toFixed(0).padStart(2,"0"),":").concat(o.toFixed(0).padStart(2,"0")),shouldWarn:t.shouldWarn})}(l)},children:e.map((t,r)=>(0,n.jsxs)(b.Accordion.Item,{value:t.name,children:[(0,n.jsx)(b.Accordion.Control,{style:{borderRadius:4,borderColor:t.color,borderWidth:4,borderStyle:"solid"},children:t.name}),(0,n.jsx)(b.Accordion.Panel,{children:(0,n.jsxs)("form",{onSubmit:Y.onSubmit(t=>(function(t,n){let r=e.map((e,l)=>l===t?n:e);l(r),k(n.name),H(r),z(r,F.current)})(r,t)),children:[(0,n.jsx)(p.TextInput,{label:"Name",placeholder:"Example Class",...Y.getInputProps("name")},Y.key("name")),(0,n.jsx)(m.Checkbox,{mt:"md",label:"Use 3 minute warning",...Y.getInputProps("shouldWarn",{type:"checkbox"})},Y.key("shouldWarn")),(0,n.jsxs)(x.Radio.Group,{mt:"md",label:"Color",...Y.getInputProps("color"),children:[(0,n.jsx)(h.Group,{mt:"xs",children:D.slice(0,5).map((e,l)=>(0,n.jsx)(x.Radio,{value:e,label:_[l],color:e},"add-".concat(e)))}),(0,n.jsx)(h.Group,{mt:"xs",children:D.slice(5,10).map((e,l)=>(0,n.jsx)(x.Radio,{value:e,label:_[l+5],color:e},"add-".concat(e)))}),(0,n.jsx)(h.Group,{mt:"xs",children:D.slice(10,15).map((e,l)=>(0,n.jsx)(x.Radio,{value:e,label:_[l+10],color:e},"add-".concat(e)))}),(0,n.jsx)(h.Group,{mt:"xs",children:D.slice(15,20).map((e,l)=>(0,n.jsx)(x.Radio,{value:e,label:_[l+15],color:e},"add-".concat(e)))}),(0,n.jsx)(h.Group,{mt:"xs",children:D.slice(20,25).map((e,l)=>(0,n.jsx)(x.Radio,{value:e,label:_[l+20],color:e},"add-".concat(e)))}),(0,n.jsx)(h.Group,{mt:"xs",children:D.slice(25,30).map((e,l)=>(0,n.jsx)(x.Radio,{value:e,label:_[l+25],color:e},"add-".concat(e)))}),(0,n.jsx)(h.Group,{mt:"xs",children:D.slice(30,35).map((e,l)=>(0,n.jsx)(x.Radio,{value:e,label:_[l+30],color:e},"add-".concat(e)))})]},Y.key("color")),(0,n.jsx)(g.M,{mt:"md",label:"Start Time",...Y.getInputProps("start")},Y.key("start")),(0,n.jsx)(g.M,{mt:"md",label:"End Time",...Y.getInputProps("end")},Y.key("end")),(0,n.jsxs)(h.Group,{justify:"flex-end",mt:"md",children:[(0,n.jsx)(f.Button,{onClick:()=>J(r),color:"red",children:"Delete"}),(0,n.jsx)(f.Button,{type:"submit",children:"Edit"})]})]})})]},t.name))})]})]})}k.kL.register(k.qi,k.u,k.De)}},function(e){e.O(0,[674,984,947,971,23,744],function(){return e(e.s=41288)}),_N_E=e.O()}]);